## Задача №1. Посты

На этом этапе мы будем не только решать вычислительные задачи, но и моделировать системы.

В качестве примера возьмём ВКонтакте: https://vk.com/dev/objects/post. Если страница недоступна, воспользуйтесь копией из каталога assets).

### На что нужно обратить внимание

1. В Kotlin используется camelCase для полей.
2. Некоторые поля помечены как integer [0, 1], хотя по логике должны быть Boolean (у вас должны быть Boolean).
3. Добавьте из перечисленных в документации около 10 полей простых типов (Int, String, Boolean).
4. Поля типа object должны быть описаны отдельными классами. Добавьте хотя бы одно такое поле (например, comments или likes).
5. Для полей вы можете добавлять значения по умолчанию, аналогично параметрам функций. При таком подходе вам не нужно будет указывать значения всех аргументов при создании объектов класса.
   
Что мы хотим получить:

1. Data-класс Post (и другие классы, которые могут быть вложены в Post).
2. Объект WallService, который хранит посты в массиве.
   
## Задача №2. Wall

Теперь нужно разобраться с функциональностью сервиса, отвечающего за стены пользователей: https://vk.com/dev/wall (копия).

Нас будут интересовать следующие методы:

- создание записи;
- обновление записи.
  
### Создание записи

Метод для создания записи должен выглядеть вот так:

    fun add(post: Post): Post {
        TODO()
    }
Как он должен работать:

1. добавлять запись в массив, но при этом назначать посту уникальный среди всех 2.постов идентификатор;
2. возвращать пост с уже выставленным идентификатором.

### Обновление записи

Метод для создания записи должен выглядеть так:

    fun update(post: Post): Boolean {
        TODO()
    }
Как он должен работать:

1. находить среди всех постов запись с тем же id, что и у post и обновлять все свойства, кроме id владельца и даты создания;
2. если пост с таким id не найден, то ничего не происходит и возвращается false, в противном случае – возвращается true.

## Задача №3. Wall Tests

Следующая задача – написать автотесты на ваши методы:

- на add – всего один, который проверяет, что после добавления поста id стал отличным от 0.
- на update – целых два:
  - изменяем пост с существующим id, возвращается true;
  - изменяем пост с несуществующим id, возвращается false.
Пока мы не проверяем, что add действительно добавил, а update действительно что-то меняет.

Этим мы займёмся на следующих лекциях, когда достроим систему до действительно тестируемой.

По факту речь идёт о том, что нам придётся либо дописать специальные вспомогательные методы, либо научиться работать с nullable значениями.

## Задача №4. Посты (без Attachments)

Мы изучили Nullable, продолжим работать с постами и поддерживать код, который вы уже написали. Это важный навык для разработчика.

Доработайте первую задачу из предыдущей лекции так, чтобы ваша система отображала все поля объекта (кроме attachments), описанного в документации. Сделайте некоторые из полей Nullable (на ваш выбор).

Если вам не доступен ВКонтакте, вы можете воспользоваться сохранённой версией из каталога assets

Итог:

- Data-класс Post.
- Внутри Post могут быть Nullable-свойства.
- WallService, который хранит посты в массиве.

## Задача №5. Attachments

У вас в массиве могут храниться разные объекты.

ВКонтакте их хранит вот так:
 
    {
        "attachments": [
      {
        "type": "photo",
        "photo": {
            "id": 1,
            "album_id": 1,
            "owner_id": 1,
            "user_id": 1
        }
      }, {
        "type": "video",
        "video": {
            "id": 1,
            "album_id": 1,
            "owner_id": 1,
            "user_id": 1
        }
      }
    ]
    }
 
В примере описано, что есть массив attachments, в котором лежат объекты (назовём их тип  Attachment). В объектах массива есть поле type, а второе поле может быть различным (оно определяется на базе значения поля type: в первом случае Photo, во втором —Video). Для организации подобной структуры будет удобно применить наследование.

Возможны два варианта:

- сделать Attachment интерфейсом,
- сделать Attachment абстрактным классом.
  
В обоих вариантах нужно добавить в Attachment поле type, а после описать наследников Attachment, которые уже будут хранить данные по типу (фото, аудио, видео). Данные Audio, Video (то, что вложено в наследников Attachment) лучше оформить в виде отдельных классов. Т.е. для одного типа вложения будут два класса: AudioAttachment и Audio. В Kotlin не обязательно каждый класс описывать в отдельном файле, а можно в одном описать сразу несколько, что будет особенно удобно в этой задаче.

Необходимо добавить к классу Post массив из объектов Attachment и описать классы Attachment, его наследников и классы для хранения данных о вложениях.

## Задача №6.PostNotFoundException

Нужно внедрить в сервис с постами возможность комментирования.

Для этого необходмо добавить метод createComment в WallService:


  class WallService {
    private var posts = emptyArray<Post>()
    private var comments = emptyArray<Comment>()

    fun createComment(postId: Int, comment: Comment): Comment {
        TODO()
    }
    }


Функция сначала должна проверить, существует ли в массиве posts пост с ID равным postId. Если существует, то добавить комментарий в массив comments и вернуть только что добавленный комментарий.

Если не существует, выкинуть исключение PostNotFoundException.

Спроектировать класс для комментариев вам нужно самостоятельно на базе описания типа Comment. Есть сохранённая копия.

